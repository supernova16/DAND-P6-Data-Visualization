#  D3.js åœ°å›¾åº”ç”¨ï¼šApple Store å…¨çƒå¯è§†åŒ–

## æ¦‚è¦

è‹¹æœå…¬å¸è¿‘å¹´æ¥åœ¨ä¸­å›½æ–°å¼€ä¸šäº†ä¸å°‘ Apple Storeï¼Œæ¯ä¸ª Apple Store éƒ½æ˜¯ç²¾å¿ƒè®¾è®¡è¿‡çš„ï¼Œæœ‰çš„ç”šè‡³æˆä¸ºäº†å½“åœ°çš„åœ°æ ‡æ€§å»ºç­‘ã€‚

åœ¨ç½‘ä¸Šæœç´¢ Apple Store å˜è¿çš„ç›¸å…³ä¿¡æ¯æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªé¡µé¢ï¼š[Apple Storefronts](http://applestorefronts.appspot.com/)ï¼Œè®°å½•äº†æ¯ä¸€å®¶ Apple Store çš„å¼€ä¸šæ—¶é—´å’Œå…·ä½“åœ°ç‚¹ã€‚ä½†è¿™ä¸ªé¡µé¢æ˜¯ä»¥åˆ—è¡¨å½¢å¼å‘ˆç°ï¼Œäºæ˜¯å†³å®šä»é‡Œå‡ºå‘æ¥åš Apple Store å…¨çƒå¯è§†åŒ–ã€‚

## è®¾è®¡å’Œå®ç°

### å¯è§†åŒ–æ•…äº‹æ‘˜è¦

1. ä½œè€…å™äº‹ï¼šä½¿ç”¨ D3.js åœ°å›¾ï¼Œä»¥ç‚¹ä»£è¡¨æ¯ä¸ªé—¨åº—ï¼Œè®²è¿°å…¨çƒ Apple Store éšæ—¶é—´çš„åœ°ç†è½æˆå’Œæ•°é‡å˜åŒ–ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œå…¨çƒçš„ Apple Store ä¸»è¦åˆ†å¸ƒåœ¨åŒ—ç¾ã€äºšæ´²ã€æ¬§æ´²å’Œæ¾³æ´²ï¼Œå…¶ä¸­ç¾å›½å¢ƒå†…åˆ†å¸ƒæœ€å¤šã€‚ä» 2001 å¹´çš„ç¬¬ä¸€å®¶ Apple Store å¼€å§‹ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œè‹¹æœå…¬å¸å…ˆæ˜¯åœ¨äºšæ´²çš„æ—¥æœ¬å’Œæ¬§æ´²çš„è‹±å›½å¼€å§‹äº†å›½é™…ç‰ˆå›¾ã€‚éšåé€æ¸æ‰©å±•åˆ°äº†æ¾³æ´²å’Œäºšæ´²ï¼Œè¿˜æœ‰æ¬§æ´²çš„æ›´å¤šåœ°åŒºã€‚

2. è¯»è€…å™äº‹ï¼šåœ¨åœ°å›¾ä¸Šä»¥ç¼©æ”¾çš„æ–¹å¼ï¼ŒæŸ¥æ‰¾é—¨åº—ï¼Œå¹¶å¯æŸ¥çœ‹æ¯ä¸ªé—¨åº—çš„è¯¦ç»†ä¿¡æ¯ã€‚

è¿™éƒ¨åˆ†è‡ªç”±åº¦å¾ˆå¤§ï¼Œè¯»è€…å¯ä»¥éšæ„äº†è§£æ„Ÿå…´è¶£åœ°åŒºçš„è‹¹æœé—¨åº—åˆ†å¸ƒå’Œè¯¦ç»†ä¿¡æ¯ã€‚æ¯”å¦‚åŒ—äº¬ä¸€å…±æœ‰ 5 å®¶ Apple Storeï¼Œå…¶ä¸­ä¸‰é‡Œå±¯ Apple Store å¼€ä¸šæœ€æ—©ï¼Œäº 2008 å¹´ 7 æœˆ 19 æ—¥å¼€ä¸šï¼Œæ˜¯å…¨çƒç¬¬ 217 å®¶ Apple Storeã€‚


### æ•°æ®ç›¸å…³

#### Apple Store æ•°æ®çˆ¬å–å’Œæ¸…ç†

> Apple Store ç›¸å…³çš„æ•°æ®å¤„ç†è¿‡ç¨‹å’Œä»£ç ï¼Œå•ç‹¬è®°å½•åœ¨äº† `data/Apple store list.ipynb` æ–‡ä»¶ä¸­

- çˆ¬è™«å·¥å…·ï¼šPython3.x,  beautifulsoup4 
- çˆ¬å–é¡µé¢1ï¼šApple Storefonts http://applestorefronts.appspot.com/all
- çˆ¬å–é¡µé¢2:ï¼šæ ¹æ®ä» Apple Storefonts æŠ“å–åˆ°çš„é—¨åº— url ä¿¡æ¯ï¼Œå†å»è‹¹æœå®˜ç½‘æ¯ä¸€ä¸ªé—¨åº—çš„å•ç‹¬ä¸»é¡µä¸Šï¼ŒæŠ“å–å¦ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œè¿™æ¬¡è¦æŠ“çš„æ˜¯ `adress`ï¼Œ`long`ï¼Œ`lat`ï¼Œ`tel`ï¼Œ`photo`ã€‚e.g. æ¾³é—¨é“¶æ²³ Apple Storeï¼šhttps://www.apple.com/mo/retail/galaxymacau/
- æ•°æ®æ•´ç†ï¼šæŠ“å–å®Œçš„æ•°æ®ï¼Œç»è¿‡æ¸…ç†ï¼Œå†™å…¥åˆ°äº† `data/apple_store_list_v2.0.csv` æ–‡ä»¶å½“ä¸­

#### åœ°å›¾æ•°æ®

åœ°å›¾æ•°æ®ä» [geojson.io](http://geojson.io/) è·å¾—ï¼Œç›´æ¥ä¸‹è½½ GeoJson æ•°æ®æ–‡ä»¶ï¼š`data/world_countries.json`

### å®ç°å’Œæ”¹è¿›

#### v1.0

--> [v1.0 ç‰ˆæœ¬ Gist åœ¨çº¿æŸ¥çœ‹](http://bl.ocks.org/supernova16/raw/f7a5fc8327a2a8361044bf9a27acb49a/)

å¸ƒå±€è‰ç¨¿ï¼š

![](http://os9qh4wzl.bkt.clouddn.com/15122610893909.jpg)


åŠŸèƒ½ï¼š

- é¡µé¢åŠ è½½åï¼Œè‡ªåŠ¨ç»˜åˆ¶ Apple Store åœ¨åœ°å›¾ä¸Šçš„ç‚¹
- ç‚¹å‡»åœ†ç‚¹å¯æŸ¥çœ‹é—¨åº—è¯¦ç»†ä¿¡æ¯ï¼šå›¾ç‰‡ï¼Œåå­—ï¼Œåœ°å€ï¼Œå¼€ä¸šæ—¥æœŸï¼ŒIDã€‚
- åœ°å›¾æ”¯æŒç¼©æ”¾å’Œæ‹–æ‹½ï¼Œæ”¾å¤§ååœ†ç‚¹ç›¸å¯¹åº”ç¼©å°ï¼Œæ–¹ä¾¿æŸ¥çœ‹åœ†ç‚¹å¯†é›†åˆ†å¸ƒçš„åœ°åŒºã€‚

å®ç°ï¼š

- D3.js
- Javascriptã€HTMLã€CSS

æœªä½¿ç”¨å…¶ä»–åº“

#### v1.1

--> [v1.1 ç‰ˆæœ¬ Gist åœ¨çº¿è®¿é—®](http://bl.ocks.org/supernova16/raw/c3b7f57a673b6ce11ce6dcf7f7568c16/)

å‘å¸ƒ v1.0 åï¼Œæ”¶åˆ°çš„åé¦ˆæ•´ç†å’Œå¤„ç†å¦‚ä¸‹ï¼š

1. é™ä½åœ†ç‚¹è½åœ¨åœ°å›¾ä¸Šçš„é€Ÿåº¦  -->  ğŸ‘ŒğŸ»
2. ~~å¢åŠ æ—¶é—´è½´ï¼Œä¾›è¯»è€…æ‹–åŠ¨ï¼Œåœ†ç‚¹ç›¸å¯¹åº”éšæ—¶é—´å˜åŒ–~~  -->  ğŸ™ˆ è¿™ä¸ªåŠŸèƒ½æ”¾åˆ° v2.0 ä¸­
3. ~~æ”¹å˜åœ°å›¾æŠ•å½±ä¸­å¿ƒç‚¹ï¼Œä»¥ç¾æ¬§ä¸ºä¸»ã€‚~~  -->  ğŸ™ˆ Apple Store ä¸»è¦åˆ†å¸ƒåœ¨ ç¾æ¬§ åœ°åŒºçš„é—®é¢˜ï¼Œè¯»è€…å¯ä»¥ç¼©æ”¾å’Œæ‹–æ‹½åœ°å›¾æ¢ç´¢ã€‚
4. ~~å¢åŠ å›½å®¶å†…çš„çœä»½åœ°å›¾~~  -->  ğŸ™ˆ è§†è§‰æ•ˆæœä¸Šä¼šæ˜¾å¾—å‡Œä¹±ï¼Œå°†åœ¨ v2.0 ä¸­å¢åŠ  å›½å®¶/åœ°åŒº ç­›é€‰æŸ¥çœ‹åŠŸèƒ½
5. ~~å¢åŠ å›½å®¶/åœ°åŒºç­›é€‰æŸ¥çœ‹åŠŸèƒ½~~  -->  ğŸ™ˆ è¿™ä¸ªåŠŸèƒ½æ”¾åˆ° v2.0 ä¸­
6. é¡µé¢ä¸€åŠ è½½å®Œå°±å¼€å§‹æ’­æ”¾ï¼Œæ²¡æœ‰è¶³å¤Ÿæ—¶é—´ç†è§£ä¿¡æ¯  -->  ğŸ‘ŒğŸ» å°†ä¼šå¢åŠ æ’­æ”¾æŒ‰é’®

v1.1 æ›´æ–°æ±‡æ€»ï¼š

- å¢åŠ æ’­æ”¾æŒ‰é’®ï¼Œè®©è¯»è€…è‡ªå·±é€‰æ‹©å¼€å§‹æ’­æ”¾æ—¶é—´ï¼Œå…¶ä¸­æ’­æ”¾æŒ‰é’®å›¾æ ‡å­—ç¬¦æ¥è‡ª [Font Awesome](http://fontawesome.io/)
- å¢åŠ äº†é¦–å±å¼•å¯¼æ ‡é¢˜ï¼Œä¸€ç›®äº†ç„¶å°†è¦æç»˜çš„å¯è§†åŒ–æ•…äº‹
- è°ƒæ•´äº†åœ†ç‚¹ç»˜åˆ¶çš„æ—¶é•¿å’Œé—´éš”ï¼Œè®©æ’­æ”¾è¿‡ç¨‹æ›´æ˜“äºè§‚å¯Ÿ



#### v2.0

ç”±äºæ—¶é—´åŸå› ï¼Œæ›´å¤šçš„åŠŸèƒ½å’Œæ”¹è¿›æ”¾åˆ° v2.0 ä¸­ï¼Œæ•¬è¯·æœŸå¾…ğŸ˜‘...


## åé¦ˆ

### v1.0 åé¦ˆè®°å½•

#### @Gaoke

>ä»è¿™ä¸ªå¯è§†åŒ–é‡Œï¼Œæˆ‘å¯ä»¥äº†è§£åˆ° apple store éšç€æ—¶é—´çš„å˜åŒ–ï¼Œæ˜¯å¦‚ä½•æ‰©å±•åˆ°å…¨çƒçš„ï¼Œä¹Ÿå¯ä»¥è§‚å¯Ÿåˆ° apple store æ•´ä½“åœ¨å…¨çƒçš„åˆ†å¸ƒã€‚é¼ æ ‡æ”¾åˆ°æŸä¸€ä¸ªç‚¹ä¸Šï¼Œè¿˜å¯ä»¥çœ‹åˆ°è¯¥åº—çš„ç…§ç‰‡ã€æ‰€åœ¨åŸå¸‚ã€å¼€åº—æ—¥æœŸç­‰ä¿¡æ¯ï¼Œéå¸¸èµã€‚
>
>æä¸¤ä¸ªå°å°çš„å»ºè®®ï¼š
>
>1. æ‰“å¼€ç½‘é¡µçœ‹åˆ°ç‚¹è½åœ¨åœ°å›¾ä¸Šçš„é€Ÿåº¦å¾ˆå¿«ï¼Œç›®ä¸æš‡æ¥ï¼Œè¿˜æ²¡çœ‹æ¸…æ¥šå°±å·²ç»å®Œäº†ï¼Œå¯å¦é™ä½é€Ÿåº¦æˆ–æä¾›ä¸€ä¸ªå¯ä»¥æ‹–åŠ¨çš„æ—¶é—´è½´ï¼Œè®©è§‚ä¼—å¯ä»¥è¿”å›å¤´æ¥çœ‹ï¼Ÿ
>
>2. åœ°å›¾çš„ä¸­å¿ƒåŒºåŸŸæ˜¯éæ´²å’Œäºšæ´²ï¼Œä½†è‹¹æœåº—ä¸»è¦åˆ†å¸ƒåœ¨ç¾å›½æœ¬åœŸã€æ¬§æ´²ã€ä¸œäºšç­‰åœ°ï¼Œè¿™æ ·çš„è¯ï¼Œè‹¹æœåº—å¤§éƒ¨åˆ†éƒ½åœ¨åœ°å›¾çš„è¾¹ç¼˜äº†ï¼Œè€Œå›¾çš„ä¸­å¿ƒç©ºç™½é¢ç§¯è¾ƒå¤§ã€‚å¯å¦æ¢ä¸€å¼ åº•å›¾ï¼Œåœ°å›¾æ˜¯ä»ä¸­äºšåˆ‡å¼€æˆ–è€…ä»å¤§è¥¿æ´‹åˆ‡å¼€ï¼Œè®©è‹¹æœåº—åˆ†å¸ƒåœ¨å›¾è¾ƒä¸­å¿ƒçš„ä½ç½®ï¼Ÿ
>



#### @Sp

>- åœ¨æ”¾å¤§åœ°å›¾æ—¶ï¼Œå°†å›½å®¶å†…çš„åœ°å›¾ï¼ˆçœä»½åˆ’åˆ†ï¼‰ä¹Ÿæ˜¾ç¤ºå‡ºæ¥æ˜¯ä¸æ˜¯æ›´å¥½ï¼Œè¿™æ ·æ›´æ–¹ä¾¿å¯»æ‰¾åœ°ç†ä½ç½®
> - æˆ–è€…æä¾›åˆ†å›½å®¶/åœ°åŒºçš„æ–¹å¼ï¼Œè®©è¯»è€…è‡ªå·±ç­›é€‰è¦æŸ¥çœ‹çš„åœ°åŒºã€‚


#### @akid

> - é¡µé¢ä¸€åŠ è½½å®Œå°±å¼€å§‹æ’­æ”¾ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥ç†è§£ä¿¡æ¯



## References

- [d3 transition problem](http://jsfiddle.net/sbecker/wL5xg/3/)
- [Wikiï¼šD3 API Reference](https://github.com/d3/d3/blob/master/API.md)
- [click-to-zoom via transform](https://bl.ocks.org/mbostock/2206590)
- [Blogï¼šD3.js åŠ¨æ€æ•°æ®åˆ·æ–°è§†å›¾è¯¦è§£](http://blog.csdn.net/nicolecc/article/details/50786661)
- [å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šå·ç§¯ï¼Ÿ](https://www.zhihu.com/question/22298352)
- Data source 1: https://www.apple.com/main/rss/retail/stores.xml
- Data source 2: http://applestorefronts.appspot.com/
- [Pythonçˆ¬è™«æ—¥è®°ä¸‰ï¼šçˆ¬å–v2exæ•°æ®ç”¨csvä¿å­˜](http://www.jianshu.com/p/d1bf2f0bdc51)


